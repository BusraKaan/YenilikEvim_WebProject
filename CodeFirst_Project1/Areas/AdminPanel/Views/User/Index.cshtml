@model IEnumerable<CodeFirst_Project1.Models.User>

@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/AdminPanel/Views/Shared/_LayoutPage1.cshtml";
}

<h2>Index</h2>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
<script src="~/Areas/AdminPanel/Assets/js/bootstrap.bundle.min.js"></script>
<script src="~/Areas/AdminPanel/Assets/jquery-3.6.0.min.js"></script>
@*<script src="~/Areas/AdminPanel/Assets/js/popper.min.js"></script>*@
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.2/umd/popper.min.js"></script>2
@*<script src="~/Areas/AdminPanel/Assets/SweetAlert/dist/sweetalert2.min.js"></script>*@
<script src="~/Areas/AdminPanel/Assets/SweetAlert/dist/sweetalert2.all.js"></script>
<link href="~/Areas/AdminPanel/Assets/SweetAlert/dist/sweetalert2.min.css" rel="stylesheet" />
<p>
    @Html.ActionLink("Create New", "Create")
</p>

<div>
    <table class="table">
        <thead class="bg-info text-white">
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.NameSurname)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.UserName)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Mail)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.RegistrationDate)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Authority)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Status)
                </th>
                @*<th>
                        @Html.DisplayNameFor(model => model.AuthorityApproval)
                    </th>*@
                @*<th>
                        @Html.DisplayNameFor(model => model.VerificationCode)
                    </th>*@
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.NameSurname)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.UserName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Mail)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.RegistrationDate)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Authority)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Status)
                    </td>
                    @*<td>
                            @Html.DisplayFor(modelItem => item.AuthorityApproval)
                        </td>*@
                    @*<td>
                            @Html.DisplayFor(modelItem => item.VerificationCode)
                        </td>*@
                    <td>
                        <a href="@Url.Action("Edit", "User", new { id=item.ID})" class="btn-sm btn-dark"><i class="fa fa-edit"></i></a>
                        <a href="@Url.Action("Details", "User", new { id = item.ID })" class="btn-sm btn-secondary"><i class="fa fa-info"></i></a>
                        <a href="" class="btn-sm btn-danger" onclick="AreYouSure(@item.ID)" id="delete"><i class="fa fa-trash"></i></a>
                        <button onclick="AreYouSure()">Sil</button>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

<script>
    function AreYouSure(userID) {
        //alert("Alert");
        swal.fire({
            title: 'Emin misiniz?',
            text: "Bu kullanıcıyı silmek istediğinize emin misiniz?",
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Evet, sil.'
        }).then(function () {
            swal(
                'Silindi!',
                'Seçilen kullanıcı silindi',
                'success'
            );
        }).then((result) => {
            if (result.isConfirmed) {

                //$.ajax({
                //    type: "POST",
                //    url: 'Url.Action("Delete", "User")',
                //    data: JSON.stringify(userID),
                //    contentType: "application/json; charset=utf-8",
                //    dataType: "json",
                //    success: function (response) {
                //        swalWithBootstrapButtons.fire(
                //            'Deleted!',
                //            'Your file has been deleted.',
                //            'success'
                //        )
                //    },
                //    error: function (error) {
                //        swalWithBootstrapButtons.fire(
                //            'Hata',
                //            'Bir hata oluştu..',
                //            'error'
                //        )
                //    }
                //})

                
            } else if (
                /* Read more about handling dismissals below */
                result.dismiss === Swal.DismissReason.cancel
            ) {
                swalWithBootstrapButtons.fire(
                    'Cancelled',
                    'Your imaginary file is safe :)',
                    'error'
                )
            }
        })
    };

    //$("#delete").click(function () {
    //    //alert("Alerttt");
    //    Swal.fire({
    //        title: 'Emin misiniz?',
    //        text: "Bu kullanıcıyı silmek istediğinize emin misiniz?",
    //        type: 'warning',
    //        showCancelButton: true,
    //        confirmButtonColor: '#3085d6',
    //        cancelButtonColor: '#d33',
    //        confirmButtonText: 'Evet, sil.'
    //    }).then(function () {
    //        swal(
    //            'Silindi!',
    //            'Seçilen kullanıcı silindi',
    //            'success'
    //        );
    //    })
    //})
</script>

